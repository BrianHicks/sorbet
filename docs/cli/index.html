<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Command Line Reference · Sorbet</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Sorbet has a wealth of command line options; we&#x27;ll only be covering a subset of"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Command Line Reference · Sorbet"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sorbet.org/"/><meta property="og:description" content="Sorbet has a wealth of command line options; we&#x27;ll only be covering a subset of"/><meta property="og:image" content="https://sorbet.org/img/sorbet-logo-card@2x.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://sorbet.org/img/sorbet-logo-card@2x.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://sorbet.org/blog/atom.xml" title="Sorbet Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://sorbet.org/blog/feed.xml" title="Sorbet Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-119877071-2', 'auto');
              ga('send', 'pageview');
            </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/sorbet-logo-white-sparkles.svg" alt="Sorbet"/><h2 class="headerTitleWithLogo">Sorbet</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/adopting" target="_self">Get started</a></li><li class="siteNavGroupActive"><a href="/docs/overview" target="_self">Docs</a></li><li class=""><a href="https://sorbet.run" target="_self">Try</a></li><li class=""><a href="/en/community" target="_self">Community</a></li><li class=""><a href="https://github.com/sorbet/sorbet" target="_self">GitHub</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Static &amp; Runtime</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/adopting">Adopting Sorbet</a></li><li class="navListItem"><a class="navItem" href="/docs/metrics">Tracking Adoption</a></li><li class="navListItem"><a class="navItem" href="/docs/quickref">Quick Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/vscode">Visual Studio Code</a></li><li class="navListItem"><a class="navItem" href="/docs/from-typescript">TypeScript ↔ Sorbet</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Static &amp; Runtime</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/gradual">Gradual Type Checking</a></li><li class="navListItem"><a class="navItem" href="/docs/static">Enabling Static Checks</a></li><li class="navListItem"><a class="navItem" href="/docs/runtime">Enabling Runtime Checks</a></li><li class="navListItem"><a class="navItem" href="/docs/rbi">RBI Files</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/cli">Command Line Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/tconfiguration">Runtime Configuration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Troubleshooting</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/why-type-annotations">Why type annotations?</a></li><li class="navListItem"><a class="navItem" href="/docs/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs/error-reference">Error Reference</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Type System</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/sigs">sig</a></li><li class="navListItem"><a class="navItem" href="/docs/type-annotations">Type Annotations (non-sig)</a></li><li class="navListItem"><a class="navItem" href="/docs/type-assertions">T.let, T.cast, T.must, T.bind</a></li><li class="navListItem"><a class="navItem" href="/docs/class-types">Class Types (Integer, String)</a></li><li class="navListItem"><a class="navItem" href="/docs/stdlib-generics">Arrays &amp; Hashes</a></li><li class="navListItem"><a class="navItem" href="/docs/nilable-types">Nilable Types (T.nilable)</a></li><li class="navListItem"><a class="navItem" href="/docs/union-types">Union Types (T.any)</a></li><li class="navListItem"><a class="navItem" href="/docs/flow-sensitive">Flow-Sensitivity (is_a?, nil?)</a></li><li class="navListItem"><a class="navItem" href="/docs/type-aliases">T.type_alias</a></li><li class="navListItem"><a class="navItem" href="/docs/exhaustiveness">Exhaustiveness (T.absurd)</a></li><li class="navListItem"><a class="navItem" href="/docs/tstruct">T::Struct</a></li><li class="navListItem"><a class="navItem" href="/docs/tenum">T::Enum</a></li><li class="navListItem"><a class="navItem" href="/docs/untyped">T.untyped</a></li><li class="navListItem"><a class="navItem" href="/docs/procs">Blocks, Procs, &amp; Lambdas</a></li><li class="navListItem"><a class="navItem" href="/docs/abstract">Abstract Classes &amp; Interfaces</a></li><li class="navListItem"><a class="navItem" href="/docs/final">Final Methods &amp; Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/override-checking">Override Checking</a></li><li class="navListItem"><a class="navItem" href="/docs/sealed">Sealed Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/class-of">T.class_of</a></li><li class="navListItem"><a class="navItem" href="/docs/self-type">T.self_type</a></li><li class="navListItem"><a class="navItem" href="/docs/noreturn">T.noreturn</a></li><li class="navListItem"><a class="navItem" href="/docs/attached-class">T.attached_class</a></li><li class="navListItem"><a class="navItem" href="/docs/intersection-types">Intersection Types (T.all)</a></li><li class="navListItem"><a class="navItem" href="/docs/non-forcing-constants">T::NonForcingConstants</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Experimental Features</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/tuples">Tuples</a></li><li class="navListItem"><a class="navItem" href="/docs/shapes">Shapes</a></li><li class="navListItem"><a class="navItem" href="/docs/generics">Generics</a></li><li class="navListItem"><a class="navItem" href="/docs/requires-ancestor">Requiring Ancestors</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/sorbet/sorbet/edit/master/website/docs/cli.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Command Line Reference</h1></header><article><div><span><p>Sorbet has a wealth of command line options; we’ll only be covering a subset of
them here. For the full set of available options, check the help at the command
line:</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># to learn about available srb subcommands</span>
❯ srb --<span class="hljs-built_in">help</span>

<span class="hljs-comment"># for options that Sorbet uses when typechecking</span>
❯ srb tc --<span class="hljs-built_in">help</span>
</code></pre>
<p>In this doc, we’ll cover <strong>only</strong> the command line interface to the <code>srb tc</code>
subcommand. For information about <code>srb init</code> and <code>srb rbi</code>, see
<a href="/docs/rbi">RBI files</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="config-file"></a><a href="#config-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Config file</h2>
<p>The first time <code>srb init</code> runs, it creates a config file that <code>srb tc</code> will
read, located at <code>sorbet/config</code>. The config file is actually just a
newline-separated list of arguments to pass to <code>srb tc</code>, the same as if they’d
been passed at the command line.</p>
<pre><code class="hljs css language-plain"><span class="hljs-comment">--dir</span>
.
# <span class="hljs-keyword">Full</span>-<span class="hljs-type">line</span> <span class="hljs-keyword">comment</span>
<span class="hljs-comment">--ignore</span>
<span class="hljs-type">path</span>/<span class="hljs-keyword">to</span>/ignore.rb
</code></pre>
<p>Every line in this file acts as if it’s prepended to the argument list of
<code>srb tc</code>. So arguments in the config file are always passed first (if it
exists), followed by arguments provided on the command line.</p>
<p>For a full description of the config file format, see the output of
<code>srb tc --help</code>.</p>
<p>To skip loading the config file (i.e., to create minimal repro examples to
report an issue), there’s the <code>--no-config</code> flag:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">srb</span></span> tc --<span class="hljs-keyword">no</span>-config ...
</code></pre>
<p>This makes it so that the only args Sorbet reads are those explicitly passed on
the command line.</p>
<p>Next we’ll call out some specific flags that are likely to help troubleshoot
problems or adapt Sorbet into an existing project.</p>
<h2><a class="anchor" aria-hidden="true" id="including-and-excluding-files"></a><a href="#including-and-excluding-files" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Including and excluding files</h2>
<p>First, some examples:</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># All *.rb / *.rbi files in the current folder</span>
srb tc .

<span class="hljs-comment"># Only the file foo.rb (+ any paths mentioned in sorbet/config)</span>
srb tc foo.rb

<span class="hljs-comment"># All *.rb / *.rbi files in the current folder,</span>
<span class="hljs-comment"># minus any file in the vendor folder of the current directory.</span>
srb tc . --ignore=/vendor
</code></pre>
<p><code>srb tc</code> can be given a list of paths (either folder or files) to Ruby files
that it should read. By default, <code>sorbet/config</code> is created to contain <code>.</code>, so
<code>srb tc</code> will type check every file in the current directory<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p>
<blockquote>
<p><strong>Note</strong>: Sorbet only checks files that end in <code>*.rb</code> or <code>*.rbi</code>. To check
other files, they must be explicitly named on the command line (or in the
config file), or given an appropriate file extension.</p>
</blockquote>
<!-- prettier-ignore-start -->
<!-- prettier-ignore-end -->
<p>Sometimes, including an entire folder includes too many files. We can refine the
list of files Sorbet reads with the <code>--ignore</code> flag. The syntax is:</p>
<pre><code class="hljs css language-plaintext">--ignore &lt;pattern&gt;
</code></pre>
<p>This will ignore input files that contain the given pattern in their paths
(relative to the input path passed to Sorbet). Patterns beginning with / match
against the prefix of these relative paths; others are substring matches.
Matches must be against whole component parts, so <code>foo</code> matches <code>/foo/bar.rb</code>
and <code>/bar/foo/baz.rb</code> but not <code>/foo.rb</code> or <code>/foo2/bar.rb</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="accepting-autocorrect-suggestions"></a><a href="#accepting-autocorrect-suggestions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Accepting autocorrect suggestions</h2>
<p>For certain errors, Sorbet suggests autocorrects that can be accepted to
automatically fix those errors. For example:</p>
<pre><code class="hljs css language-ruby">sig {params(<span class="hljs-symbol">xs:</span> T::Array[Integer]).void}
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(xs)</span></span>
  xs[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span> <span class="hljs-comment"># error: Method `+` does not exist on `NilClass` component</span>
<span class="hljs-keyword">end</span>

example([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
</code></pre>
<p><a href="https://sorbet.run/#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0A%0Asig%20%7Bparams%28xs%3A%20T%3A%3AArray%5BInteger%5D%29.void%7D%0Adef%20example%28xs%29%0A%20%20xs%5B0%5D%20%2B%201%0Aend%0A%0Aexample%28%5B1%2C%202%2C%203%5D%29">→ View on sorbet.run</a></p>
<p>In this example, Sorbet does not think that the <code>+</code> method always exists,
because <code>xs[0]</code> might be <code>nil</code> if the <code>xs</code> list is empty.</p>
<p>In this example, though, we know that the <code>xs</code> array will always be non-empty.
If, as the programmer, we know this invariant will always hold, we can use
<code>T.must</code> to fix the problem. Sorbet even suggests that in the error message:</p>
<pre><code class="hljs">editor.rb:<span class="hljs-number">6</span>: Method `+` does <span class="hljs-keyword">not</span> exist on `NilClass` component of `T.nilable(Integer)` https:<span class="hljs-comment">//srb.help/7003</span>
     <span class="hljs-number">6</span> |  xs[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>
                ^
  Got `T.nilable(Integer)` originating <span class="hljs-keyword">from</span>:
    editor.rb:<span class="hljs-number">6</span>:
     <span class="hljs-number">6</span> |  xs[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>
          ^^^^^
  Autocorrect: Use `-a` to <span class="hljs-built_in">auto</span>correct
    editor.rb:<span class="hljs-number">6</span>: Replace with `T.must(xs[<span class="hljs-number">0</span>])`
     <span class="hljs-number">6</span> |  xs[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>
          ^^^^^
Errors: <span class="hljs-number">1</span>
</code></pre>
<p>To accept this suggestion, we can re-run Sorbet with the <code>-a</code> or <code>--autocorrect</code>
command line flag:</p>
<pre><code class="hljs">❯ srb tc <span class="hljs-comment">--autocorrect</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="limiting-autocorrect-suggestions"></a><a href="#limiting-autocorrect-suggestions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limiting autocorrect suggestions</h3>
<p>By default, Sorbet will apply <strong>all</strong> autocorrect suggestions when the <code>-a</code> or
<code>--autocorrect</code> flag is provided. To only have Sorbet apply some autocorrect
suggestions, use the <code>--isolate-error-code</code> flag with a Sorbet error code. For
example, using the error code in the above error message:</p>
<pre><code class="hljs">❯ srb tc --<span class="hljs-built_in">auto</span>correct --isolate-error-code=<span class="hljs-number">7003</span>
</code></pre>
<p>The <code>--isolate-error-code</code> option can be repeated with different error codes to
have Sorbet apply autocorrects for all the mentioned error codes, but no others.</p>
<p>There is no way to have Sorbet <strong>only</strong> apply autocorrect suggestions in a given
file. Instead, use a version control system to undo autocorrect changes Sorbet
makes in files that should not be changed.</p>
<h3><a class="anchor" aria-hidden="true" id="silencing-errors-in-bulk"></a><a href="#silencing-errors-in-bulk" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Silencing errors in bulk</h3>
<p>Sometimes, Sorbet doesn’t know how to <strong>fix</strong> an error, it only knows how to
<strong>silence</strong> the error. Sorbet does not show these autocorrect suggestions by
default, because it does not want to train people, especially new Sorbet users,
to blindly silence type errors.</p>
<p>However, there are cases where silencing errors in bulk can be useful (e.g.,
when doing a large-but-incremental refactor to a core library, or upgrading to a
new Sorbet version that introduces many new type errors).</p>
<p>Use the <code>--suggest-unsafe</code> flag to have Sorbet additionally produce autocorrect
suggestions that will unconditionally silence certain errors. Use
<code>--suggest-unsafe --autocorrect</code> to accept these suggestions. For example, here
is a program that Sorbet would not usually suggest an autocorrect for:</p>
<pre><code class="hljs css language-ruby">sig {params(<span class="hljs-symbol">x:</span> T.any(Integer, String)).void}
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(x)</span></span>
  <span class="hljs-number">1</span> + x <span class="hljs-comment"># error: Expected `Integer` but found `T.any(Integer, String)`</span>
<span class="hljs-keyword">end</span>

example(<span class="hljs-number">1</span>)
</code></pre>
<p>But if we pass the <code>--suggest-unsafe</code> flag to Sorbet, it will suggest an
autocorrect:</p>
<pre><code class="hljs">❯ srb tc --suggest-<span class="hljs-keyword">unsafe</span>
editor.rb:<span class="hljs-number">6</span>: Expected `Integer` but found `T.any(Integer, String)` <span class="hljs-keyword">for</span> argument `arg0` https:<span class="hljs-comment">//srb.help/7002</span>
     <span class="hljs-number">6</span> |  <span class="hljs-number">1</span> + x
              ^
  Expected `Integer` <span class="hljs-keyword">for</span> argument `arg0` <span class="hljs-keyword">of</span> <span class="hljs-function"><span class="hljs-keyword">method</span> `<span class="hljs-title">Integer</span>#+`:</span>
    https:<span class="hljs-comment">//github.com/sorbet/sorbet/tree/master/rbi/core/integer.rbi#L148:</span>
     <span class="hljs-number">148</span> |        arg0: Integer,
                  ^^^^
  Got `T.any(Integer, String)` originating <span class="hljs-keyword">from</span>:
    editor.rb:<span class="hljs-number">5</span>:
     <span class="hljs-number">5</span> |def example(x)
                    ^
  Autocorrect: Use `-a` <span class="hljs-keyword">to</span> autocorrect
    editor.rb:<span class="hljs-number">6</span>: Replace <span class="hljs-keyword">with</span> `T.unsafe(x)`
     <span class="hljs-number">6</span> |  <span class="hljs-number">1</span> + x
              ^
Errors: <span class="hljs-number">1</span>
</code></pre>
<p><a href="https://sorbet.run/#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0A%0Asig%20%7Bparams%28x%3A%20T.any%28Integer%2C%20String%29%29.void%7D%0Adef%20example%28x%29%0A%20%201%20%2B%20x%0Aend%0A%0Aexample%281%29">→ View without <code>--suggest-unsafe</code> on sorbet.run</a><br>
<a href="https://sorbet.run/?arg=--suggest-unsafe#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0A%0Asig%20%7Bparams%28x%3A%20T.any%28Integer%2C%20String%29%29.void%7D%0Adef%20example%28x%29%0A%20%201%20%2B%20x%0Aend%0A%0Aexample%281%29">→ View with <code>--suggest-unsafe</code> on sorbet.run</a></p>
<p>Note how the autocorrect suggestion here suggests adding <code>T.unsafe</code>, but only
when the <code>--suggest-unsafe</code> flag was provided.</p>
<p>We recommend using <code>--suggest-unsafe</code> especially when doing Sorbet version
upgrades. Usually the reason why a Sorbet version upgrade introduces a new error
is because some old behavior was silently hiding a type error that was <strong>already
present</strong> in the codebase. Using <code>T.unsafe</code> to silence the existing errors makes
it easy to quickly upgrade to the new version, effectively locking newly-written
code from suffering from that Sorbet bug. It’s always possible to audit old
usages of <code>T.unsafe</code>. Sorbet gets better with each release, and upgrading Sorbet
early and often is usually less work over time.</p>
<p>Sorbet also allows customizing the unsafe suggestions: given
<code>--suggest-unsafe=&lt;custom method&gt;</code>, Sorbet will use the <code>&lt;custom method&gt;</code> in
place of <code>T.unsafe</code> in all suggestions. For example:</p>
<pre><code class="hljs"><span class="hljs-comment">❯</span> <span class="hljs-comment">srb</span> <span class="hljs-comment">tc</span> --<span class="hljs-comment">suggest</span><span class="hljs-literal">-</span><span class="hljs-comment">unsafe=XXX</span><span class="hljs-string">.</span><span class="hljs-comment">sorbet_0_5_1234</span> --<span class="hljs-comment">autocorrect</span>
</code></pre>
<p>This would cause case Sorbet to suggest converting <code>x</code> in the example above to
<code>XXX.sorbet_0_5_1234(x)</code>. It would then be possible to define a module like
this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">XXX</span></span>
  <span class="hljs-comment"># Automatically-suppressed error during upgrade to Sorbet version 0.5.1234</span>
  <span class="hljs-comment">#</span>
  <span class="hljs-comment"># If you see this method used in a file your team owns, consider removing the</span>
  <span class="hljs-comment"># call and fixing the resulting error, or replacing it with `T.unsafe` if the</span>
  <span class="hljs-comment"># error cannot be fixed.</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">sorbet_0_5_1234</span><span class="hljs-params">(x)</span></span>; x; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>A method named like this sticks out in the codebase as a flag to potential
developers that something has been automatically silenced instead of being
manually silenced. Placing a comment on the method shows the contextual message
when people hover over any call site.</p>
<h2><a class="anchor" aria-hidden="true" id="overriding-strictness-levels"></a><a href="#overriding-strictness-levels" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overriding strictness levels</h2>
<p>By default, Sorbet reads each file to determine its
<a href="/docs/static#file-level-granularity-strictness-levels">strictness level</a>,
defaulting to <code># typed: false</code> if none is provided.</p>
<p>It can be useful, especially when <a href="/docs/adopting">Adopting Sorbet</a> to see what it
would be like if certain files were at a different strictness level. There are a
handful of flags that do this:</p>
<h4><a class="anchor" aria-hidden="true" id="--typed-level"></a><a href="#--typed-level" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--typed &lt;level&gt;</code></h4>
<p>This option forces every file Sorbet reads to <code># typed: &lt;level&gt;</code>. For example:</p>
<pre><code class="hljs css language-plaintext">❯ srb tc --typed=true
</code></pre>
<p>Will report errors in every file as if they’d been declared <code># typed: true</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="--typed-override-filepathyaml"></a><a href="#--typed-override-filepathyaml" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--typed-override filepath.yaml</code></h4>
<p>This option is similar, except we can provide a YAML file that declares
overrides on a file-by-file basis. For example, with this YAML file:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-comment"># -- foo.yaml --</span>
<span class="hljs-attr">true:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">./foo.rb</span>
</code></pre>
<p>and this Ruby file:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- foo.rb --</span>
<span class="hljs-comment"># typed: false</span>
<span class="hljs-string">"string"</span> + <span class="hljs-symbol">:symbol</span>
</code></pre>
<p>This will be the output using the <code>--typed-override</code> flag:</p>
<pre><code class="hljs css language-plaintext">❯ srb tc --typed-override=foo.yaml foo.rb
foo.rb:3: Expected `String` but found `Symbol(:"symbol")` for argument `arg0`
...
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="is-there-a-way-to-get-errors-in-json-format"></a><a href="#is-there-a-way-to-get-errors-in-json-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Is there a way to get errors in JSON format?</h2>
<p>There is not, intentionally. If you’re trying to consume Sorbet’s output from a
script, we recommend you either consume Sorbet via the LSP protocol, or using
standard UNIX tools like <code>sed</code> and <code>awk</code> to extract information from the
human-readable output.</p>
<p>Why? Committing to a stable output format is an ongoing maintenance burden for
the Sorbet team. We have explicitly chosen only two output formats:</p>
<ul>
<li><p>The human-readable error output seen when running <code>srb tc</code> from the CLI
directly.</p></li>
<li><p>Output conforming to the <a href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol</a>, which drives editor
integrations (see the <code>--lsp</code> flag).</p></li>
</ul>
<p>The LSP spec is stable, versioned, typed, and easy to test whether Sorbet
conforms to it. We don’t want to be in the business of inventing competing
editor output formats, so we explicitly only support these two.</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1"  class="footnote-item"><p>This is incidentally why Sorbet does not type check gems: the paths to
gems’ source directories are never given to Sorbet. <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/rbi"><span class="arrow-prev">← </span><span>RBI Files</span></a><a class="docs-next button" href="/docs/tconfiguration"><span>Runtime Configuration</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#config-file">Config file</a></li><li><a href="#including-and-excluding-files">Including and excluding files</a></li><li><a href="#accepting-autocorrect-suggestions">Accepting autocorrect suggestions</a><ul class="toc-headings"><li><a href="#limiting-autocorrect-suggestions">Limiting autocorrect suggestions</a></li><li><a href="#silencing-errors-in-bulk">Silencing errors in bulk</a></li></ul></li><li><a href="#overriding-strictness-levels">Overriding strictness levels</a></li><li><a href="#is-there-a-way-to-get-errors-in-json-format">Is there a way to get errors in JSON format?</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="wrapper"><p class="footer">© 2022 Stripe · <a href="/docs/adopting">Get started</a> · <a href="/docs/overview">Docs</a> · <a href="https://sorbet.run">Try</a> · <a href="/en/community">Community</a> · <a href="/blog">Blog</a> · <a href="https://twitter.com/sorbet_ruby">Twitter</a></p></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'ZYWC6Z01G8',
                apiKey: 'b05a65e9f8d9f50dc4ec3241db8836c4',
                indexName: 'stripe_sorbet',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>